<?xml version="1.0" encoding="UTF-8"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.4.xsd">
  
  	<kanban columnBy="status" model="com.axelor.gst.db.Invoice" sequenceBy="priority" title="Invoice" name="invoice_kanban">
  		<field name="refrence" />
		<field name="invoiceDate" />
		<field name="company" />
		<field name="party" />
		<field name="grossAmount" />
		
		<template>
			<![CDATA[
			<table>
				<tr>
					<strong>{{refrence}}</strong><br/>
				</tr>
				
				<strong>{{invoiceDate}}</strong><br/>
				<strong>Company:{{company.name}}</strong><br/>
				<strong>Party:{{party.name}}</strong><br/>
				<strong>{{grossAmount}}</strong>
			</table>
			]]>
		</template>
  	</kanban>
	
	<grid model="com.axelor.gst.db.Invoice" title="Invoices" name="invoice_grid">
		<field name="refrence" />
		<field name="status" />
		<field name="invoiceDate" />
		<field name="company" />
		<field name="party" />
		<field name="grossAmount" />
	</grid>
	
	<form model="com.axelor.gst.db.Invoice" title="Invoice" name="invoice_form" onNew="action-on-new-date-time,action-one-new-default-company" 
					onSave="action-set-invoice-net">
	<panel name="mainPanel1">
	
		<field name="refrence" />
		<field name="status" widget="NavSelect" />
		<field name="invoiceDate" />
		<field name="useInvoiceAddressAsShippingAddress" onChange="action-invoiceAdd-as-shippingAdd"/>
		<field name="company" />
		<field name="party" onChange="action-set-party-contact,action-invoiceAdd-as-shippingAdd" />
		<field name="partyContact" />
		<field name="invoiceAddress" target-name="line1" />
		<field name="shippingAddress" target-name="line1" />
	</panel>
	
	<panel name="mainPanel2">
		<field name="netAmmount" />
		<field name="netIGST" />
		<field name="netCSGT" />
		<field name="netSGST" />
		<field name="grossAmount" />
	</panel>
	
	<panel name="invoiceLinePanle">
		<panel-related field="invoiceItem" />
	</panel>

	<panel name="sidePanel" sidebar="true">
		<button onClick="action-click-validate,action-set-invoice-refrence" name="statusBtn" title="Validate" />
		<button onClick="action-click-paid" name="validateBtn" title="Paid"/>
		<button onClick="action-click-Cancelled" name="validateBtn" title="Cancelled"/>
	</panel>
	
	</form>
	
	<action-record name="action-on-new-date-time" model="com.axelor.gst.db.Invoice">
		<field name="invoiceDate" expr="eval: __date__"/>
	</action-record>
	
	<action-record name="action-click-validate" model="com.axelor.gst.db.Invoice">
		<field name="status" expr="eval: 2" />
	</action-record>
	<action-record name="action-click-paid" model="com.axelor.gst.db.Invoice">
		<field name="status" expr="eval: 3"  />
	</action-record>
		<action-record name="action-click-Cancelled" model="com.axelor.gst.db.Invoice">
		<field name="status" expr="eval: 4"  />
	</action-record>
	
	
	<action-record name="action-one-new-default-company" model="com.axelor.gst.db.Invoice">
 		<field name="company" expr="eval: __repo__(Company).all().fetch().get(0)" /> 
	</action-record>
	
	<action-method name="action-set-party-contact" model="com.axelor.gst.db.Invoice">
		<call class="com.axelor.gst.web.InvoiceController" method="setPartyContact"/>
	</action-method>
	
	<action-method name="action-invoiceAdd-as-shippingAdd" model="com.axelor.gst.db.Invoice">
		<call class="com.axelor.gst.web.InvoiceController" method="setShippingAdd"/>
	</action-method>
	
	
	<action-method name="action-set-invoice-net" model="com.axelor.gst.db.Invoice">
		<call class="com.axelor.gst.web.InvoiceController" method="setInvoiceNet"/>
	</action-method>
	
	<action-method name="action-set-invoice-refrence" model="com.axelor.gst.db.Invoice">
		<call class="com.axelor.gst.web.InvoiceController" method="setSequence" />
	</action-method>
	
</object-views>













